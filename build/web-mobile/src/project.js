window.__require=function e(t,i,n){function s(r,a){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){return s(t[r][1][e]||e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function o(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,o,c,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(a(i=this._events[e]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(r(i))for(o=Array.prototype.slice.call(arguments,1),n=(h=i.slice()).length,c=0;c<n;c++)h[c].apply(this,o);return!0},n.prototype.addListener=function(e,t){var i;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var i,n,o,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,n=-1,i===t||s(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(a=o;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,i){(function(e,n){"object"==typeof i&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define("StateMachine",[],n):"object"==typeof i?i.StateMachine=n():e.StateMachine=n()})(this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t,i){"use strict";e.exports=function(e,t){var i,n,s;for(i=1;i<arguments.length;i++)for(s in n=arguments[i])n.hasOwnProperty(s)&&(e[s]=n[s]);return e}},function(e,t,i){"use strict";var n=i(0);e.exports={build:function(e,t){var i,s,o,r=t.plugins;for(i=0,s=r.length;i<s;i++)(o=r[i]).methods&&n(e,o.methods),o.properties&&Object.defineProperties(e,o.properties)},hook:function(e,t,i){var n,s,o,r,a=e.config.plugins,c=[e.context];for(i&&(c=c.concat(i)),n=0,s=a.length;n<s;n++)r=a[n],(o=a[n][t])&&o.apply(r,c)}}},function(e,t,i){"use strict";function n(e){if(0===e.length)return e;var t,i,n=e.split(/[_-]/);if(1===n.length&&n[0][0].toLowerCase()===n[0][0])return e;for(i=n[0].toLowerCase(),t=1;t<n.length;t++)i=i+n[t].charAt(0).toUpperCase()+n[t].substring(1).toLowerCase();return i}n.prepended=function(e,t){return e+(t=n(t))[0].toUpperCase()+t.substring(1)},e.exports=n},function(e,t,i){"use strict";var n=i(0),s=i(2);function o(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}n(o.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=s.prepended("onEnter",e),this.lifecycle.onLeave[e]=s.prepended("onLeave",e),this.lifecycle.on[e]=s.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=s.prepended("onBefore",e),this.lifecycle.onAfter[e]=s.prepended("onAfter",e),this.lifecycle.on[e]=s.prepended("on",e)},mapTransition:function(e){var t=e.name,i=e.from,n=e.to;return this.addState(i),"function"!=typeof n&&this.addState(n),this.addTransition(t),this.map[i][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(n({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(n({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){var i,n,s;for(i=0,n=(e=e||[]).length;i<n;i++)"function"==typeof(s=e[i])&&(e[i]=s=s()),s.configure&&s.configure(this);return e},configureTransitions:function(e){var t,i,n,s,o,r=this.defaults.wildcard;for(i=0;i<e.length;i++)for(n=e[i],s=Array.isArray(n.from)?n.from:[n.from||r],o=n.to||r,t=0;t<s.length;t++)this.mapTransition({name:n.name,from:s[t],to:o})},transitionFor:function(e,t){var i=this.defaults.wildcard;return this.map[e][t]||this.map[i][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=o},function(e,t,i){var n=i(0),s=i(6),o=i(1),r=[null,[]];function a(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}n(a.prototype,{init:function(e){if(n(this.context,this.config.data.apply(this.context,e)),o.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var i=this.config.defaults.wildcard,n=this.config.transitionFor(this.state,e),s=n&&n.to;return"function"==typeof s?s.apply(this.context,t):s===i?this.state:s},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,i,n){var s=this.config.lifecycle,o=this.config.options.observeUnchangedState||t!==i;return i?this.isPending()?this.context.onPendingTransition(e,t,i):(this.config.addState(i),this.beginTransit(),n.unshift({transition:e,from:t,to:i,fsm:this.context}),this.observeEvents([this.observersForEvent(s.onBefore.transition),this.observersForEvent(s.onBefore[e]),o?this.observersForEvent(s.onLeave.state):r,o?this.observersForEvent(s.onLeave[t]):r,this.observersForEvent(s.on.transition),o?["doTransit",[this]]:r,o?this.observersForEvent(s.onEnter.state):r,o?this.observersForEvent(s.onEnter[i]):r,o?this.observersForEvent(s.on[i]):r,this.observersForEvent(s.onAfter.transition),this.observersForEvent(s.onAfter[e]),this.observersForEvent(s.on[e])],n)):this.context.onInvalidTransition(e,t,i)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,i=0,n=this.observers.length,s=[];i<n;i++)(t=this.observers[i])[e]&&s.push(t);return[e,s,!0]},observeEvents:function(e,t,i,n){if(0===e.length)return this.endTransit(void 0===n||n);var s=e[0][0],r=e[0][1],a=e[0][2];if(t[0].event=s,s&&a&&s!==i&&o.hook(this,"lifecycle",t),0===r.length)return e.shift(),this.observeEvents(e,t,s,n);var c=r.shift(),h=c[s].apply(c,t);return h&&"function"==typeof h.then?h.then(this.observeEvents.bind(this,e,t,s)).catch(this.failTransit.bind(this)):!1===h?this.endTransit(!1):this.observeEvents(e,t,s,h)},onInvalidTransition:function(e,t,i){throw new s("transition is invalid in current state",e,t,i,this.state)},onPendingTransition:function(e,t,i){throw new s("transition is invalid while previous transition is still in progress",e,t,i,this.state)}}),e.exports=a},function(e,t,i){"use strict";var n=i(0),s=i(2),o=i(1),r=i(3),a=i(4),c={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,i){return this._fsm.onInvalidTransition(e,t,i)},onPendingTransition:function(e,t,i){return this._fsm.onPendingTransition(e,t,i)}},h={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};function u(e){return l(this||{},e)}function l(e,t){return d(e,new r(t,u)),e._fsm(),e}function d(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");o.build(e,t),Object.defineProperties(e,h),n(e,c),n(e,t.methods),t.allTransitions().forEach(function(t){e[s(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}}),e._fsm=function(){this._fsm=new a(this,t),this._fsm.init(arguments)}}u.version="3.0.1",u.factory=function(){var e,t;"function"==typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var i=new r(t,u);return d(e.prototype,i),e.prototype._fsm.config=i,e},u.apply=l,u.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=u},function(e,t,i){"use strict";e.exports=function(e,t,i,n,s){this.message=e,this.transition=t,this.from=i,this.to=n,this.current=s}}])})},{}],Base:[function(e,t,i){"use strict";cc._RF.push(t,"ebde7hi5NBIlowoLUvneYGG","Base");var n=e("MainEmitter"),s=e("EventCode").GAME_EVENTS,o=e("EventEmitter"),r=e("Key");cc.Class({extends:cc.Component,properties:{healthBar:cc.ProgressBar,maxHealth:50,curHealth:0,explosionSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.curHealth=this.maxHealth,this.isDestroyed=!1,n.instance.registerEvent(s.HIT_BASE,this.onHitBase.bind(this))},onHitBase:function(e){this.curHealth-=e,this.healthBar.progress=this.curHealth/this.maxHealth,this.curHealth<=0&&!this.isDestroyed&&(this.isDestroyed=!0,o.instance.emit(r.LOSE_GAME),o.instance.emit(r.PLAY_SFX,this.explosionSound),this.node.getChildByName("Base Explosion").active=!0,this.healthBar.active=!1,this.node.getChildByName("Sprite").color=cc.Color.GRAY,n.instance.emit(s.END_GAME))}}),cc._RF.pop()},{EventCode:"EventCode",EventEmitter:"EventEmitter",Key:"Key",MainEmitter:"MainEmitter"}],Bullet:[function(e,t,i){"use strict";cc._RF.push(t,"2d759sq75lOx4l/vUtraiZD","Bullet"),cc.Class({extends:cc.Component,properties:{speed:20,damage:0,explosionSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.isRocketCollided=!1},update:function(e){this.isRocketCollided||(this.node.x+=this.velocity.x,this.node.y+=this.velocity.y)},configBullet:function(e){this.damage=e.damage,this.getComponent(cc.Sprite).spriteFrame=e.spriteFrame,this.node.width=e.size.width,this.node.height=e.size.height},onCollisionEnter:function(e,t){"enemy"===e.node.group&&("bullet"===t.node.group&&this.handleBulletCollision(e),"rocket"===t.node.group&&1===t.tag&&this.handleRocketCollision(),"rocket"===t.node.group&&2===t.tag&&this.handleRocketExplosion(e))},setVelocity:function(){var e=(this.node.angle-180)*(Math.PI/180)-Math.PI/2;this.velocity=cc.v2(Math.cos(e)*this.speed,Math.sin(e)*this.speed)},handleBulletCollision:function(e){this.node.destroy(),e.node.getComponent("Enemy").takeDamage(this.damage)},handleRocketCollision:function(){var e=this;this.isRocketCollided=!0,this.node.getComponent(cc.BoxCollider).enabled=!1,this.playExplosionAnimation(),this.scheduleOnce(function(){e.node.getComponent(cc.CircleCollider).enabled=!0},0)},handleRocketExplosion:function(e){e.node.getComponent("Enemy").takeDamage(this.damage)},destroyBullet:function(){this.node.destroy()},playExplosionAnimation:function(){this.node.scale=.5;var e=this.node.getComponent(cc.Animation);e.on("play",this.playExplosionSound,this),e.on("finished",this.destroyBullet,this),e.play(e.defaultClip.name)},playExplosionSound:function(){var e=cc.audioEngine.playEffect(this.explosionSound,!1);this.scheduleOnce(function(){cc.audioEngine.stopEffect(e)},.5)}}),cc._RF.pop()},{}],EnemyWaves:[function(e,t,i){"use strict";cc._RF.push(t,"98a775zeI9FH4lkMC/tsSZk","EnemyWaves");var n=e("MainEmitter"),s=e("EventCode").UI_EVENTS,o=e("EventEmitter"),r=e("Key"),a=e("WaveData");cc.Class({extends:cc.Component,properties:{wave:{default:null,type:a}},onLoad:function(){var e=this;o.instance.registerOnce(r.LOSE_GAME,function(){return e.waveIndex=e.maxWave+1})},init:function(e){this.waveIndex=0,this.maxWave=10,this.isLastWave=!1,this.enemyCount=0,this.isBoss=!1,this.bossCreated=0,this.level=e,this.items=[],this.createWave()},createWave:function(){var e=this;if(++this.waveIndex,!(this.waveIndex>this.maxWave)){var t=this.wave,i=0;this.isLastWave=this.waveIndex===this.maxWave,n.instance.emit(s.CREATE_WAVE),1===this.waveIndex?this.enemiesCount=5:2===this.waveIndex?this.enemiesCount=10:this.enemiesCount++,this.schedule(function(){n.instance.emit(s.UPDATE_WAVE_COUNT,e.waveIndex),e.createEnemy(t.enemies,e.waveIndex,i),i++},t.repeatInterval,this.enemiesCount-1,t.timeout)}},createEnemy:function(e,t,i){var n=this,s=this.enemiesCount-1;5===t&&i===s||10===t&&i===s?(this.isBoss=!0,this.bossCreated++):this.isBoss=!1;var o=e[this.isBoss?2:Math.floor(Math.random()*(e.length-1))],r=cc.instantiate(o);this.node.addChild(r);var a=r.getComponent("Enemy");this.isBoss?(5===t&&(a.health=1500,a.coins=500),10===t&&(a.health=3e3,a.coins=1e3)):(a.health=a.health*t,a.coins=a.coins*t),a.init(this.level),this.items.push(a),r.once("killed",function(){n.onEnemyRemoved("enemy-killed",a)},this),r.once("finished",function(){n.onEnemyRemoved("enemy-finished",a)},this)},onEnemyRemoved:function(e,t){if(this.node.emit(e,t),this.items=this.items.filter(function(e){return e!==t}),!this.items.length){if(this.isLastWave)return void o.instance.emit(r.WIN_GAME);this.createWave()}}}),cc._RF.pop()},{EventCode:"EventCode",EventEmitter:"EventEmitter",Key:"Key",MainEmitter:"MainEmitter",WaveData:"WaveData"}],Enemy:[function(e,t,i){"use strict";cc._RF.push(t,"67ed0+CLJJM8oTR1Qg4EHKL","Enemy");var n=e("MainEmitter"),s=e("EventCode").GAME_EVENTS;cc.Class({extends:cc.Component,properties:{velocity:{default:150,serializable:!0},health:50,damage:{default:10,serializable:!0},coins:{default:10,serializable:!0},_rotationSpeed:300},init:function(e){this.levelMap=e.map},start:function(){this.targets=this.levelMap.tiledMap.getObjectGroup("path").getObjects(),this.targetIndex=1,this.node.setPosition(this.getCurrentTargetPosition()),this.targetIndex++,this.move()},move:function(){var e=this,t=this.getCurrentTargetPosition();t?(this.rotateTo(t),this.moveTo(t).then(function(){e.targetIndex++,e.move()})):(this.node.emit("finished"),this.node.destroy())},getAngle:function(e){return-180*Math.atan2(e.y-this.node.y,e.x-this.node.x)/Math.PI},rotateTo:function(e){var t=this.getAngle(e),i=Math.abs(t-this.node.angle);if(i){var n=i/this._rotationSpeed;this.node.runAction(cc.rotateTo(n,t))}},moveTo:function(e){var t=this,i=Math.abs(e.x-this.node.x),n=Math.abs(e.y-this.node.y),s=Math.max(i,n)/this.velocity;return new Promise(function(i){var n=cc.moveTo(s,e),o=cc.sequence(n,cc.callFunc(i));t.node.runAction(o)})},getCurrentTarget:function(){var e=this;return this.targets.find(function(t){return parseInt(t.name)===e.targetIndex})},getCurrentTargetPosition:function(){var e=this.getCurrentTarget();if(!e)return!1;var t=this.levelMap.getTileCoordinatesByPosition(cc.v2(e.x,e.y)),i=this.levelMap.roadsLayer.getPositionAt(t.x,t.y);return cc.v2(i.x+this.levelMap.tileWidth/2,i.y+this.levelMap.tileWidth/2)},takeDamage:function(e){this.health-=e,this.health<=0&&(this.node.stopAllActions(),this.node.emit("killed"),n.instance.emit(s.ENEMY_KILLED,this.coins),this.node.destroy())},onCollisionEnter:function(e,t){"base"===e.node.group&&(n.instance.emit(s.HIT_BASE,this.damage),t.node.emit("finished"),t.node.destroy())}}),cc._RF.pop()},{EventCode:"EventCode",MainEmitter:"MainEmitter"}],EventCode:[function(e,t,i){"use strict";cc._RF.push(t,"e9a79QGzPxLvoy/FeaKrFnw","EventCode");t.exports={GAME_EVENTS:{ENEMY_KILLED:"enemy-killed",HIT_BASE:"hit-base",END_GAME:"end-game",INSTANTIATE_TOWER:"instantiate-tower",REQUEST_BUY_TOWER:"request-buy-tower",CREATE_TOWER:"create-tower",SELL_TOWER:"sell-tower",REQUEST_UPGRADE_TOWER:"request-upgrade-tower",UPGRADE_TOWER:"upgrade-tower"},UI_EVENTS:{CREATE_WAVE:"create-wave",UPDATE_WAVE_COUNT:"update-wave-count",UPDATE_COINS_AMOUNT:"update-coins-amount"},SOUND_EVENTS:{TOWER_SHOOT:"tower-shoot"}},cc._RF.pop()},{}],EventEmitter:[function(e,t,i){"use strict";cc._RF.push(t,"10a70sUlt9ExKMIdskC12bD","EventEmitter");var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("events"),r=function(){function e(){s(this,e),this._emitter=new o,this._emitter.setMaxListeners(100)}return n(e,[{key:"emit",value:function(){var e;(e=this._emitter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emitter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emitter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emitter.removeListener(e,t)}},{key:"destroy",value:function(){this._emitter.removeAllListeners(),this._emitter=null,e.instance=null}}]),e}();r.instance=null,t.exports=r,cc._RF.pop()},{events:1}],GameAudio:[function(e,t,i){"use strict";cc._RF.push(t,"5db4fNz6/VMwY2I3ityfwkX","GameAudio");var n=e("EventEmitter"),s=e("Key");cc.Class({extends:cc.Component,properties:{turretBuildSound:{type:cc.AudioClip,default:null},upgradeSound:{type:cc.AudioClip,default:null},sellTurretSound:{type:cc.AudioClip,default:null}},onLoad:function(){var e=this;n.instance.registerEvent(s.BUILD_TURRET,function(){n.instance.emit(s.PLAY_SFX,e.turretBuildSound)}.bind(this)),n.instance.registerEvent(s.UPGRADE_SOUND,function(){n.instance.emit(s.PLAY_SFX,e.upgradeSound)}.bind(this)),n.instance.registerEvent(s.SELL_SOUND,function(){n.instance.emit(s.PLAY_SFX,e.sellTurretSound)}.bind(this))}}),cc._RF.pop()},{EventEmitter:"EventEmitter",Key:"Key"}],GameManager:[function(e,t,i){"use strict";cc._RF.push(t,"a9b0a+VCK1BmopdGjoOVBXC","GameManager");var n=e("javascript-state-machine"),s=e("EventEmitter"),o=e("Key"),r="init",a="start",c="wave_complete",h="game_over";cc.Class({extends:cc.Component,properties:{UI:e("UI"),mSounds:{type:cc.AudioClip,default:[]}},onLoad:function(){var e=this;s.instance.registerEvent(o.SEND_DATA,function(t){cc.log(t),s.instance.emit(o.PLAY_MUSIC,e.mSounds[0])}.bind(this)),this._onStartGame=this.onStartGame.bind(this),this._onCompleteGame=this.onCompleteGame.bind(this),this._onGameOver=this.onGameOver.bind(this),this.fsm=new n({init:r,transitions:[{name:"goStart",from:r,to:a},{name:"goComplete",from:a,to:c},{name:"goOver",from:a,to:h}],methods:{onGoStart:this._onStartGame,onGoComplete:this._onCompleteGame,onGoOver:this._onGameOver}}),s.instance.registerOnce(o.WIN_GAME,this.onCompleteGame.bind(this)),s.instance.registerOnce(o.LOSE_GAME,this.onGameOver.bind(this))},start:function(){this.fsm.goStart()},onStartGame:function(){cc.log("start game")},onCompleteGame:function(){this.UI.completeGame(),this.scheduleOnce(function(){cc.sys.isBrowser&&window.location.reload()},3)},onGameOver:function(){this.UI.gameOver(),this.scheduleOnce(function(){cc.sys.isBrowser&&window.location.reload()},3)}}),cc._RF.pop()},{EventEmitter:"EventEmitter",Key:"Key",UI:"UI","javascript-state-machine":2}],Key:[function(e,t,i){"use strict";cc._RF.push(t,"808f59yllREH60d0xBqyZqK","Key"),t.exports={POPUP_SHOW:"popupShow",POPUP_HIDE:"popupHide",PLAY_MUSIC:"playMusic",PLAY_SFX:"playSfx",CHANGE_SFX_VOLUME:"changeSfxVolume",CHANGE_MUSIC_VOLUME:"changeMusicVolume",WIN_GAME:"victory",LOSE_GAME:"defeat",BUILD_TURRET:"buildTurret",UPGRADE_SOUND:"upgradeTurret",SELL_SOUND:"sellTurret"},cc._RF.pop()},{}],LevelMap:[function(e,t,i){"use strict";cc._RF.push(t,"f398fUyZupLRIR9cy11+aqb","LevelMap"),cc.Class({extends:cc.Component,properties:{},init:function(){this.tiledMap=this.getComponent(cc.TiledMap),this.roadsLayer=this.tiledMap.getLayer("roads"),this.towersLayer=this.tiledMap.getLayer("towers"),this.tiledSize=this.tiledMap.getTileSize(),this.tileWidth=this.tiledSize.width,this.tileHeight=this.tiledSize.height,this.mapSize=this.tiledMap.getMapSize(),this.mapWidth=this.mapSize.width,this.mapHeight=this.mapSize.height},getTileCoordinatesByPosition:function(e){return{x:Math.floor(e.x/this.tileWidth),y:this.mapHeight-Math.floor(e.y/this.tileHeight)-1}}}),cc._RF.pop()},{}],Level:[function(e,t,i){"use strict";cc._RF.push(t,"04980rEz+hDLZ3jKOiUixFM","Level");var n=e("MainEmitter"),s=e("EventCode"),o=s.GAME_EVENTS,r=s.UI_EVENTS,a=e("LevelMap"),c=e("PanelCreate"),h=e("Towers"),u=e("PanelUpgrade"),l=e("EnemyWaves");cc.Class({extends:cc.Component,properties:{map:{default:null,type:a},panelCreate:{default:null,type:c},panelUpgrade:{default:null,type:u},towers:{default:null,type:h},enemyWaves:{default:null,type:l}},onLoad:function(){this.coins=60,this.init(),this.setEvents()},start:function(){n.instance.emit(r.UPDATE_COINS_AMOUNT,this.coins)},init:function(){cc.director.getCollisionManager().enabled=!0,this.map.init(),this.panelCreate.init(this.map),this.panelUpgrade.init(this.map),this.towers.init(this.map),this.enemyWaves.init(this)},setEvents:function(){this.map.node.on("touchend",this.onMapTouch,this),n.instance.registerEvent(o.REQUEST_BUY_TOWER,this.onRequestBuyTower.bind(this)),n.instance.registerEvent(o.ENEMY_KILLED,this.updateCoinsAmount.bind(this)),n.instance.registerEvent(o.SELL_TOWER,this.updateCoinsAmount.bind(this)),n.instance.registerEvent(o.REQUEST_UPGRADE_TOWER,this.onRequestUpgradeTower.bind(this))},onMapTouch:function(e){this.panelCreate.hide(),this.panelUpgrade.hide();var t=e.getLocation(),i={x:2*t.x,y:2*t.y},n=this.map.getTileCoordinatesByPosition(i);if(this.map.towersLayer.getTileGIDAt(n)){var s=this.towers.getByCoordinates(n);s?this.panelUpgrade.show(n,s):this.panelCreate.show(n)}},onRequestBuyTower:function(e){this.coins>=e?(n.instance.emit(o.CREATE_TOWER),this.updateCoinsAmount(-e)):console.log("Not enough coins to buy tower!"),this.panelCreate.hide()},onRequestUpgradeTower:function(e){this.coins>=e.upgradePrice?(this.updateCoinsAmount(-e.upgradePrice),e.upgradeTower()):console.log("Not enough coins to upgrade tower!"),this.panelUpgrade.hide()},updateCoinsAmount:function(e){this.coins+=e,n.instance.emit(r.UPDATE_COINS_AMOUNT,this.coins)}}),cc._RF.pop()},{EnemyWaves:"EnemyWaves",EventCode:"EventCode",LevelMap:"LevelMap",MainEmitter:"MainEmitter",PanelCreate:"PanelCreate",PanelUpgrade:"PanelUpgrade",Towers:"Towers"}],MainEmitter:[function(e,t,i){"use strict";cc._RF.push(t,"9cba0opxORCvpkLRvxPMkQU","MainEmitter");var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("events"),r=function(){function e(){s(this,e),this._emiter=new o,this._emiter.setMaxListeners(100)}return n(e,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"emit",value:function(){var e;(e=this._emiter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emiter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emiter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emiter.removeListener(e,t)}},{key:"destroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,e.instance=null}}]),e}();r.instance=new r,t.exports=r,cc._RF.pop()},{events:1}],MenuManager:[function(e,t,i){"use strict";cc._RF.push(t,"052144YkiVE3qs/fTutm9+p","MenuManager");var n=e("EventEmitter"),s=e("Key"),o=e("SettingController");cc.Class({extends:cc.Component,properties:{mButton:[cc.Button],mainMenu:cc.Node,settingPopup:cc.Node,mMenuMusic:{type:cc.AudioClip,default:null},mClickSound:{type:cc.AudioClip,default:null}},start:function(){n.instance.emit(s.PLAY_MUSIC,this.mMenuMusic)},onStartGame:function(){n.instance.emit(s.PLAY_SFX,this.mClickSound),cc.director.loadScene("Game",function(){n.instance.emit(s.SEND_DATA,o)})},onSetting:function(){n.instance.emit(s.PLAY_SFX,this.mClickSound),n.instance.emit(s.POPUP_SHOW,this.settingPopup),this.mButton.forEach(function(e){e.interactable=!1})},onBackMenu:function(){n.instance.emit(s.PLAY_SFX,this.mClickSound),n.instance.emit(s.POPUP_HIDE,this.settingPopup),this.mButton.forEach(function(e){e.interactable=!0})}}),cc._RF.pop()},{EventEmitter:"EventEmitter",Key:"Key",SettingController:"SettingController"}],PanelCreate:[function(e,t,i){"use strict";cc._RF.push(t,"57748c2zQpCFpRbi469wSkI","PanelCreate");var n=e("MainEmitter"),s=e("EventCode").GAME_EVENTS,o=e("EventEmitter"),r=e("Key");cc.Class({extends:cc.Component,properties:{panel1:cc.Node,panel2:cc.Node},init:function(e){this.map=e,this.coordinates={x:0,y:0},this.panel1.on("touchend",this.onPanelClick,this),this.panel2.on("touchend",this.onPanelClick,this)},show:function(e){this.coordinates=e;var t=this.map.towersLayer.getPositionAt(this.coordinates);this.node.setPosition(cc.v2(t.x+this.map.tileWidth/2,t.y+this.map.tileHeight/2)),this.node.active=!0},hide:function(){this.node.active=!1},onPanelClick:function(e){n.instance.emit(s.INSTANTIATE_TOWER,{towerKey:e.target.name,towerCoordinates:this.coordinates}),o.instance.emit(r.BUILD_TURRET)}}),cc._RF.pop()},{EventCode:"EventCode",EventEmitter:"EventEmitter",Key:"Key",MainEmitter:"MainEmitter"}],PanelUpgrade:[function(e,t,i){"use strict";cc._RF.push(t,"bf72ccFHBtMv56dPM5YGEyZ","PanelUpgrade");var n=e("MainEmitter"),s=e("EventCode").GAME_EVENTS,o=e("EventEmitter"),r=e("Key");cc.Class({extends:cc.Component,properties:{upgradeBtn:cc.Node,sellBtn:cc.Node},init:function(e){this.map=e,this.coordinates={x:0,y:0},this.towerComponent=null,this.upgradeBtn.on("touchend",this.onUpgradeTower,this),this.sellBtn.on("touchend",this.onSellTower,this)},show:function(e,t){this.towerComponent=t,this.coordinates=e;var i=this.map.towersLayer.getPositionAt(this.coordinates);this.node.setPosition(cc.v2(i.x+this.map.tileWidth/2,i.y+this.map.tileHeight/2)),this.node.active=!0},hide:function(){this.node.active=!1},onUpgradeTower:function(){o.instance.emit(r.UPGRADE_SOUND),n.instance.emit(s.REQUEST_UPGRADE_TOWER,this.towerComponent),this.hide()},onSellTower:function(){var e=Math.trunc(this.towerComponent.price/2);o.instance.emit(r.SELL_SOUND),n.instance.emit(s.SELL_TOWER,e),n.instance.emit(s.DESTROY_TOWER,this.towerComponent),this.hide()}}),cc._RF.pop()},{EventCode:"EventCode",EventEmitter:"EventEmitter",Key:"Key",MainEmitter:"MainEmitter"}],PopupSystem:[function(e,t,i){"use strict";cc._RF.push(t,"b9da43kubFIxY4QpXD/uyDe","PopupSystem");var n=e("EventEmitter"),s=e("Key");cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.instance.registerEvent(s.POPUP_SHOW,this.popupShow.bind(this)),n.instance.registerEvent(s.POPUP_HIDE,this.popupHide.bind(this))},popupShow:function(e){e.active=!0},popupHide:function(e){e.active=!1}}),cc._RF.pop()},{EventEmitter:"EventEmitter",Key:"Key"}],SettingController:[function(e,t,i){"use strict";cc._RF.push(t,"f6dfai4LbhH+IgqhT9mSlbR","SettingController");var n=e("EventEmitter"),s=e("Key"),o={sfxVolume:.5,musicVolume:.5};cc.Class({extends:cc.Component,properties:{sfxVolumeSlider:cc.Slider,musicVolumeSlider:cc.Slider},ChangeSfxVolume:function(){n.instance.emit(s.CHANGE_SFX_VOLUME,this.sfxVolumeSlider.progress),o.sfxVolume=this.sfxVolumeSlider.progress},ChangeMusicVolume:function(){n.instance.emit(s.CHANGE_MUSIC_VOLUME,this.musicVolumeSlider.progress),o.musicVolume=this.musicVolumeSlider.progress}}),t.exports=o,cc._RF.pop()},{EventEmitter:"EventEmitter",Key:"Key"}],SingleTon:[function(e,t,i){"use strict";cc._RF.push(t,"b91ddA37klL74rfFkCcWAvf","SingleTon");var n=e("EventEmitter");cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.instance=new n}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],SoundManager:[function(e,t,i){"use strict";cc._RF.push(t,"73fbfUcnI9IHooXEbci6gSm","SoundManager");var n=e("MainEmitter"),s=e("EventCode").SOUND_EVENTS;cc.Class({extends:cc.Component,properties:{tower1Sound:{default:null,type:cc.AudioClip}},onLoad:function(){n.instance.registerEvent(s.TOWER_SHOOT,this.playTowerShootSound.bind(this))},start:function(){},playTowerShootSound:function(){cc.audioEngine.playEffect(this.tower1Sound,!1)}}),cc._RF.pop()},{EventCode:"EventCode",MainEmitter:"MainEmitter"}],SoundSystem:[function(e,t,i){"use strict";cc._RF.push(t,"ff7f7OpPuJLK6uOq4d16tlU","SoundSystem");var n=e("EventEmitter"),s=e("Key");cc.Class({extends:cc.Component,properties:{mMusicSound:cc.AudioSource,mSfxSound:cc.AudioSource},onLoad:function(){n.instance.registerEvent(s.PLAY_MUSIC,this.playMusic.bind(this)),n.instance.registerEvent(s.PLAY_SFX,this.playSfx.bind(this)),n.instance.registerEvent(s.CHANGE_SFX_VOLUME,this.changeSfxVolume.bind(this)),n.instance.registerEvent(s.CHANGE_MUSIC_VOLUME,this.changeMusicVolume.bind(this))},playMusic:function(e){this.mMusicSound.clip=e,this.mMusicSound.play()},playSfx:function(e){this.mSfxSound.clip=e,this.mSfxSound.play()},changeSfxVolume:function(e){this.mSfxSound.volume=e},changeMusicVolume:function(e){this.mMusicSound.volume=e}}),cc._RF.pop()},{EventEmitter:"EventEmitter",Key:"Key"}],TowersData:[function(e,t,i){"use strict";cc._RF.push(t,"a4615+Hvp1MGIfzJVsS8I1V","TowersData");t.exports={TOWER_1_DATA:[{type:"Tower1",level:1,damage:25,reloadTime:1,price:60,upgradePrice:100,attackRange:0,bulletSpriteFrameIndex:0,bulletSize:{width:20,height:20}},{type:"Tower1",level:2,damage:50,reloadTime:1,price:100,upgradePrice:200,attackRange:0,bulletSpriteFrameIndex:1,bulletSize:{width:30,height:30}},{type:"Tower1",level:3,damage:50,reloadTime:1,price:200,upgradePrice:400,attackRange:0,bulletSpriteFrameIndex:2,bulletSize:{width:30,height:30}},{type:"Tower1",level:4,damage:100,reloadTime:1,price:400,upgradePrice:800,attackRange:0,bulletSpriteFrameIndex:3,bulletSize:{width:30,height:30}},{type:"Tower1",level:5,damage:100,reloadTime:1,price:800,upgradePrice:null,attackRange:0,bulletSpriteFrameIndex:4,bulletSize:{width:30,height:38}}],TOWER_2_DATA:[{type:"Tower2",level:1,damage:20,reloadTime:2,price:60,upgradePrice:100,attackRange:1,bulletSpriteFrameIndex:0,bulletSize:{width:20,height:40}},{type:"Tower2",level:2,damage:40,reloadTime:2,price:100,upgradePrice:200,attackRange:1,bulletSpriteFrameIndex:1,bulletSize:{width:20,height:40}},{type:"Tower2",level:3,damage:40,reloadTime:2,price:200,upgradePrice:400,attackRange:1,bulletSpriteFrameIndex:2,bulletSize:{width:20,height:40}},{type:"Tower2",level:4,damage:80,reloadTime:2,price:400,upgradePrice:800,attackRange:1,bulletSpriteFrameIndex:3,bulletSize:{width:20,height:40}},{type:"Tower2",level:5,damage:80,reloadTime:2,price:800,upgradePrice:null,attackRange:1,bulletSpriteFrameIndex:4,bulletSize:{width:25,height:55}}]},cc._RF.pop()},{}],Towers:[function(e,t,i){"use strict";cc._RF.push(t,"91cafmOETRCQrBiZNYxD7zC","Towers");var n=e("MainEmitter"),s=e("EventCode").GAME_EVENTS;cc.Class({extends:cc.Component,properties:{towerPrefabs:[cc.Prefab]},onLoad:function(){this.curTowerNode=null,n.instance.registerEvent(s.INSTANTIATE_TOWER,this.onInstantiateTower.bind(this)),n.instance.registerEvent(s.CREATE_TOWER,this.onCreateTower.bind(this)),n.instance.registerEvent(s.DESTROY_TOWER,this.onDestroyTower.bind(this))},init:function(e){this.map=e,this.towerComponents=[]},onInstantiateTower:function(e){var t=e.towerKey,i=e.towerCoordinates,o=cc.instantiate(this.towerPrefabs.find(function(e){return e.name===t})),r=o.getComponent("Tower");r.init(i,t);var a=this.map.towersLayer.getPositionAt(i);o.setPosition(cc.v2(a.x+this.map.tileWidth/2,a.y+this.map.tileHeight/2)),this.curTowerNode=o,n.instance.emit(s.REQUEST_BUY_TOWER,r.price)},onCreateTower:function(){var e=this.curTowerNode.getComponent("Tower");this.towerComponents.push(e),this.node.addChild(this.curTowerNode)},onDestroyTower:function(e){this.removeTowerComponent(e)},getByCoordinates:function(e){return this.towerComponents.find(function(t){return t.coordinates.x===e.x&&t.coordinates.y===e.y})},removeTowerComponent:function(e){this.towerComponents=this.towerComponents.filter(function(t){return t.coordinates.x!==e.coordinates.x||t.coordinates.y!==e.coordinates.y}),e.node.destroy(),this.curTowerNode=null}}),cc._RF.pop()},{EventCode:"EventCode",MainEmitter:"MainEmitter"}],Tower:[function(e,t,i){"use strict";cc._RF.push(t,"22ce26KkJVM1KaiK8h8hxKE","Tower");var n=e("EventEmitter"),s=e("Key"),o=e("TowersData"),r=o.TOWER_1_DATA,a=o.TOWER_2_DATA;e("MainEmitter"),e("EventCode").GAME_EVENTS;cc.Class({extends:cc.Component,properties:{damage:0,reloadTime:0,attackRange:0,rotationSpeed:2e3,price:0,upgradePrice:0,bulletPrefab:cc.Prefab,bulletSpriteFrames:[cc.SpriteFrame],bulletPosition:cc.Node,shootingSound:{type:cc.AudioClip,default:null},levelTowers:[cc.Node]},onLoad:function(){this.timer=0,this.currentEnemy=null},update:function(e){this.currentEnemy&&(this.timer+=e,this.timer>=this.reloadTime&&(this.shoot(),this.timer=0))},init:function(e,t){this.coordinates=e,this.level=1,this.maxLevel=5,this.targets=[],this.type=t,this.towerData="Tower1"===this.type?r:a,this.bulletData={damage:null,spriteFrame:null,size:null},this.configTower()},configTower:function(){var e=this.towerData[this.level-1];this.damage=e.damage,this.reloadTime=e.reloadTime,this.price=e.price,this.attackRange=e.attackRange,this.upgradePrice=e.upgradePrice,this.bulletData.damage=e.damage,this.bulletData.size=e.bulletSize,this.bulletData.spriteFrame=this.bulletSpriteFrames[e.bulletSpriteFrameIndex]},upgradeTower:function(){this.level>=this.maxLevel?console.log("Tower max level"):(this.levelTowers[this.level-1].active=!1,this.levelTowers[this.level].active=!0,this.level++,this.configTower(),console.log("Upgrade tower successfully!",this.level))},onCollisionEnter:function(e,t){"enemy"===e.node.group&&(this.targets.push(e.node),this.setTarget())},onCollisionStay:function(e,t){"enemy"===e.node.group&&this.lookAtEnemy(this.currentEnemy)},onCollisionExit:function(e,t){this.removeTarget(e.node),this.setTarget()},removeTarget:function(e){this.targets=this.targets.filter(function(t){return t!==e})},setTarget:function(){this.currentEnemy=this.targets[0]},shoot:function(){if(this.currentEnemy){var e=cc.instantiate(this.bulletPrefab),t=this.node.convertToWorldSpaceAR(this.bulletPosition.position),i=this.node.parent.convertToNodeSpaceAR(t);e.position=cc.v2(i.x,i.y),e.angle=this.node.angle,e.getComponent("Bullet").configBullet(this.bulletData),this.node.parent.addChild(e),e.getComponent("Bullet").setVelocity(),n.instance.emit(s.PLAY_SFX,this.shootingSound)}},lookAtEnemy:function(e){var t=cc.v2(e.x,e.y),i=cc.v2(this.node.x,this.node.y),n=t.sub(i),s=Math.atan2(n.y,n.x),o=cc.misc.radiansToDegrees(s)-90;this.node.angle=o}}),cc._RF.pop()},{EventCode:"EventCode",EventEmitter:"EventEmitter",Key:"Key",MainEmitter:"MainEmitter",TowersData:"TowersData"}],UI:[function(e,t,i){"use strict";cc._RF.push(t,"d8cb9xE91JP/4NufbPnG6BL","UI");var n=e("MainEmitter"),s=e("EventCode").UI_EVENTS;cc.Class({extends:cc.Component,properties:{coinAmountLabel:cc.Label,waveAmountLabel:cc.Label,waveTimeoutLabel:cc.Label,winPanel:cc.Node,losePanel:cc.Node},onLoad:function(){this.coins=null,this.coinAmountLabel.string=this.coins,this.timer=10,this.waveAmountLabel.string="Wave 0",n.instance.registerEvent(s.CREATE_WAVE,this.onCreateWave.bind(this)),n.instance.registerEvent(s.UPDATE_WAVE_COUNT,this.onUpdateWaveCount.bind(this)),n.instance.registerEvent(s.UPDATE_COINS_AMOUNT,this.onUpdateCoinsAmount.bind(this)),this.showWaveTimeout()},onCreateWave:function(){this.showWaveTimeout()},onUpdateWaveCount:function(e){this.waveAmountLabel.string="Wave "+e},showWaveTimeout:function(){this.waveTimeoutLabel.string="Next wave in "+this.timer+"s",this.waveTimeoutLabel.node.active=!0,this.schedule(this.countDown,1)},countDown:function(){if(1===this.timer)return this.waveTimeoutLabel.node.active=!1,this.timer=10,void this.unschedule(this.countDown);this.timer--,this.waveTimeoutLabel.string="Next wave in "+this.timer+"s"},onUpdateCoinsAmount:function(e){this.coins=e,this.coinAmountLabel.string=this.coins},completeGame:function(){this.winPanel.active=!0},gameOver:function(){this.losePanel.active=!0}}),cc._RF.pop()},{EventCode:"EventCode",MainEmitter:"MainEmitter"}],WaveData:[function(e,t,i){"use strict";cc._RF.push(t,"a7829QRGOhD6oJxFHeM/lsF","WaveData"),cc.Class({extends:cc.Component,properties:{enemies:{default:[],type:[cc.Prefab]},enemiesCount:0,timeout:{default:10,serializable:!0},repeatInterval:1}}),cc._RF.pop()},{}]},{},["GameAudio","SettingController","GameManager","MenuManager","PopupSystem","SoundSystem","EventEmitter","Key","SingleTon","Base","Bullet","Enemy","EnemyWaves","Level","LevelMap","PanelCreate","PanelUpgrade","SoundManager","Tower","Towers","TowersData","UI","WaveData","EventCode","MainEmitter"]);